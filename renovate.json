{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",

    "extends": [
        "config:recommended",
        ":dependencyDashboard",
        ":semanticCommits",
        ":prConcurrentLimit10",
        ":prHourlyLimit2",
        ":automergeBranch",
        ":automergeMinor"
    ],

    "vulnerabilityAlerts": { "enabled": true },
    "osvVulnerabilityAlerts": true,

    "labels": ["dependencies"],
    "timezone": "Asia/Manila",

    "schedule": ["on the 17th day of the month after 1am and before 4am"],
    "rangeStrategy": "bump",

    "lockFileMaintenance": {
        "enabled": true,
        "schedule": ["on the 17th day of the month before 3am"],
        "dependencyDashboardApproval": true,
        "labels": ["lockfile-maintenance"]
    },

    "packageRules": [
        {
            "groupName": "lint & formatting",
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "matchPackageNames": ["/eslint/", "/lint/", "/prettier/", "/stylelint/"],
            "automerge": true
        },
        {
            "groupName": "typescript core (minor & patch)",
            "matchPackageNames": ["typescript"],
            "matchUpdateTypes": ["minor", "patch"],
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "automerge": false
        },
        {
            "groupName": "typescript core (major upgrades)",
            "matchPackageNames": ["typescript"],
            "matchUpdateTypes": ["major"],
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "labels": ["major-upgrade"],
            "dependencyDashboardApproval": true,
            "prConcurrentLimit": 1,
            "automerge": false
        },
        {
            "groupName": "typescript tooling",
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "matchPackageNames": ["/ts-node/", "/ts-jest/"],
            "automerge": false
        },
        {
            "groupName": "testing & QA",
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "matchPackageNames": ["/jest/", "/vitest/", "/playwright/", "/cypress/", "/@testing-library//"],
            "matchUpdateTypes": ["minor", "patch"],
            "automerge": true
        },
        {
            "groupName": "storybook ecosystem",
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "matchPackageNames": ["/^storybook/", "/@storybook//"],
            "matchUpdateTypes": ["minor", "patch"],
            "automerge": true
        },
        {
            "groupName": "react & next.js core (minor & patch)",
            "matchPackageNames": ["/^react/", "/^react-dom/", "/^next/"],
            "matchUpdateTypes": ["minor", "patch"],
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "automerge": false
        },
        {
            "groupName": "react & next.js core (major upgrades)",
            "matchPackageNames": ["/^react/", "/^react-dom/", "/^next/"],
            "matchUpdateTypes": ["major"],
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "labels": ["major-upgrade"],
            "dependencyDashboardApproval": true,
            "prConcurrentLimit": 1,
            "automerge": false
        },
        {
            "matchDepTypes": ["devDependencies"],
            "schedule": ["on the 17th day of the month after 1am and before 4am"],
            "matchUpdateTypes": ["minor", "patch"],
            "automerge": true
        }
    ]
}
